// BIND config for internal DNS ({{ internal_dns_zone }}) â€“ TSIG + dynamic updates
include "{{ internal_dns_zone_dir }}/tsig.key";

options {
    directory "{{ internal_dns_zone_dir }}";
    pid-file "/var/run/named.pid";
    listen-on { {% if internal_dns_listen | length > 0 %}{% for a in internal_dns_listen %}{{ a }}; {% endfor %}{% else %}any;{% endif %} };
    listen-on-v6 { none; };
{% if internal_dns_forwarders | length > 0 %}
    forwarders { {% for f in internal_dns_forwarders %}{{ f }}; {% endfor %} };
    forward only;
{% endif %}
};

zone "{{ internal_dns_zone }}" {
    type master;
    file "db.{{ internal_dns_zone }}";
    allow-transfer { none; };
    update-policy {
        grant {{ internal_dns_tsig_key_name }} zonesub any;
    };
};

zone "." {
    type hint;
    file "root.hint";
};
